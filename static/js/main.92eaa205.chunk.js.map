{"version":3,"sources":["components/Section/Section.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/SearchBar/SearchBar.module.css","components/SearchBar/SearchBar.js","helpers/mapper.js","components/ImageGallery/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Section/Section.js","components/Button/Button.js","components/Loader/Loader.js","components/Modal/Modal.js","components/App/App.js","services/apiFetch.js","index.js","components/ImageGallery/ImageGallery.module.css"],"names":["module","exports","SearchBar","onSubmit","useState","value","setValue","className","s","searchBar","searchForm","e","preventDefault","trim","searchButton","type","buttonLabel","formInput","autoComplete","autoFocus","placeholder","onChange","currentTarget","mapper","hits","map","imageId","id","smallImg","webformatURL","modalImg","largeImageURL","tags","ImageGalleryItem","onModalClick","galleryImage","src","alt","onClick","ImageGallery","images","onModalOpen","gallery","item","Section","children","section","container","Button","onLoadMore","button","Spinner","color","height","width","timeout","modalRoot","document","querySelector","Modal","onClose","useEffect","modalClose","code","window","addEventListener","removeEventListener","createPortal","overlay","target","modal","App","setImages","query","setQuery","setModalImg","setTags","page","setPage","loading","setLoading","modalShow","setModalShow","error","setError","searchName","axios","get","imageApi","then","data","prevState","scrollTo","top","documentElement","scrollHeight","behavior","catch","finally","toggleModal","message","length","Loader","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.92eaa205.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"Section_section__1ckd0\",\"container\":\"Section_container__3b6IU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__1VDzz\",\"modal\":\"Modal_modal__1oIXf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__37tfU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchBar\":\"SearchBar_searchBar__wMuFE\",\"searchForm\":\"SearchBar_searchForm__3qyjp\",\"searchButton\":\"SearchBar_searchButton__29_lw\",\"buttonLabel\":\"SearchBar_buttonLabel__1Wcii\",\"formInput\":\"SearchBar_formInput__3I1Uq\"};","import { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './SearchBar.module.css';\r\n\r\nconst SearchBar = ({ onSubmit }) => {\r\n  const [value, setValue] = useState('');\r\n\r\n  const handleChangeInput = ({ currentTarget: { value } }) => {\r\n    setValue(value);\r\n  };\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n    if (value.trim()) {\r\n      onSubmit(value);\r\n      setValue('');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <header className={s.searchBar}>\r\n      <form className={s.searchForm} onSubmit={handleSubmit}>\r\n        <button className={s.searchButton} type=\"submit\">\r\n          <span className={s.buttonLabel}>Search</span>\r\n        </button>\r\n        <input\r\n          className={s.formInput}\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          autoFocus\r\n          placeholder=\"Search images and photos\"\r\n          onChange={handleChangeInput}\r\n        />\r\n      </form>\r\n    </header>\r\n  );\r\n};\r\n\r\nSearchBar.propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,\r\n};\r\n  \r\nexport default SearchBar;","const mapper = hits => {\r\n  return hits.map(\r\n    ({\r\n      id: imageId,\r\n      webformatURL: smallImg,\r\n      largeImageURL: modalImg,\r\n      tags,\r\n    }) => ({ imageId, smallImg, modalImg, tags }),\r\n  );\r\n};\r\n\r\nexport default mapper;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './ImageGallery.module.css';\r\n\r\nconst ImageGalleryItem = ({ smallImg, modalImg, tags, onModalClick }) => {\r\n  return (\r\n    <img\r\n      className={s.galleryImage}\r\n      src={smallImg}\r\n      alt={tags}\r\n      onClick={() => onModalClick(modalImg, tags)}\r\n    />\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  smallImg: PropTypes.string.isRequired,\r\n  modalImg: PropTypes.string.isRequired,\r\n  tags: PropTypes.string.isRequired,\r\n  onModalClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from 'react';\r\nimport ImageGalleryItem from './ImageGalleryItem';\r\nimport PropTypes from 'prop-types';\r\nimport s from './ImageGallery.module.css';\r\n\r\nconst ImageGallery = ({ images, onModalOpen }) => (\r\n  <ul className={s.gallery}>\r\n    {images.map(({ imageId, smallImg, modalImg, tags }) => (\r\n      <li className={s.item} key={imageId}>\r\n        <ImageGalleryItem\r\n          smallImg={smallImg}\r\n          tags={tags}\r\n          modalImg={modalImg}\r\n          onModalClick={onModalOpen}\r\n        />\r\n      </li>\r\n    ))}\r\n  </ul>\r\n);\r\n\r\nImageGallery.propTypes = {\r\n  images: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      imageId: PropTypes.number.isRequired,\r\n      smallImg: PropTypes.string.isRequired,\r\n      modalImg: PropTypes.string.isRequired,\r\n      tags: PropTypes.string.isRequired,\r\n    }).isRequired,\r\n  ).isRequired,\r\n  onModalOpen: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Section.module.css';\r\n\r\nconst Section = ({ children }) => (\r\n  <section className={s.section}>\r\n    <div className={s.container}>{children}</div>\r\n  </section>\r\n);\r\n\r\nSection.propTypes = {\r\n  children: PropTypes.node,\r\n};\r\n\r\nexport default Section;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Button.module.css';\r\n\r\nconst Button = ({ onLoadMore }) => (\r\n  <button className={s.button} type=\"button\" onClick={() => onLoadMore()}>\r\n    Load more\r\n  </button>\r\n);\r\n\r\nButton.propTypes = {\r\n  onLoadMore: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Button;\r\n","import Loader from 'react-loader-spinner';\r\nimport React from 'react';\r\n\r\nconst Spinner = () => (\r\n  <Loader\r\n    type=\"ThreeDots\"\r\n    color=\"#3f51b5\"\r\n    height={100}\r\n    width={100}\r\n    timeout={3000}\r\n  />\r\n);\r\n\r\nexport default Spinner;\r\n","import { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal');\n\nconst Modal = ({ onClose, modalImg, tags }) => {\n  useEffect(() => {\n    const modalClose = e => {\n      if (e.code === 'Escape') {\n        onClose();\n      }\n    };\n    window.addEventListener('keydown', modalClose);\n    return () => window.removeEventListener('keydown', modalClose);\n  });\n      \n  const handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      onClose();\n    }\n  };\n\n  return createPortal(\n    <div className={s.overlay} onClick={handleBackdropClick}>\n      <div className={s.modal}>\n        <img src={modalImg} alt={tags} />\n      </div>\n    </div>,\n    modalRoot,\n  );\n};\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default Modal;\n\n// export default class Modal extends Component {\n//   static propTypes = {\n//     onClose: PropTypes.func.isRequired,\n//   };\n\n//   componentDidMount() {\n//     window.addEventListener('keydown', this.modalClose);\n//   }\n\n//   componentWillUnmount() {\n//     window.removeEventListener('keydown', this.modalClose);\n//   }\n\n//   modalClose = e => {\n//     const { onClose } = this.props;\n//     if (e.code === 'Escape') {\n//       onClose();\n//     }\n//   };\n\n//   handleBackdropClick = e => {\n//     const { onClose } = this.props;\n//     if (e.currentTarget === e.target) {\n//       onClose();\n//     }\n//   };\n\n//   render() {\n//     const { modalImg, tags } = this.props;\n//     return createPortal(\n//       <div className={s.overlay} onClick={this.handleBackdropClick}>\n//         <div className={s.modal}>\n//           <img src={modalImg} alt={tags} />\n//         </div>\n//       </div>,\n//       modalRoot,\n//     );\n//   }\n// }\n","import * as imageApi from '../../services/apiFetch';\nimport { useState, useEffect } from 'react';\nimport SearchBar from '../SearchBar';\nimport mapper from '../../helpers/mapper';\nimport ImageGallery from '../ImageGallery';\nimport Section from '../Section';\nimport Button from '../Button';\nimport Loader from '../Loader';\nimport Modal from '../Modal';\n\nconst App = () => {\n\n  const [images, setImages] = useState([]);\n  const [query, setQuery] = useState('');\n  const [modalImg, setModalImg] = useState('');\n  const [tags, setTags] = useState('');\n  const [page, setPage] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [modalShow, setModalShow] = useState(false);\n  const [error, setError] = useState('')\n\nuseEffect(() => {\n  if (query === '') {\n    return;\n  }\n  setLoading(true);\n    imageApi\n      .fetchImg(query, page)\n      .then(({ data: { hits } }) => {\n        setImages(prevState => [...prevState, ...mapper(hits)])\n        window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n      })\n      .catch(error => setError( error))\n      .finally(() => setLoading(false ));\n}, [query, page])\n  \n\n  const reset = () => {\n    setImages([]);\n    setQuery('');\n    setPage(1);\n  };\n\n  const handleSubmit = query => {\n    reset();\n    setQuery( query );\n  };\n\n  const handleNextPage = () => {\n    setPage(prevState => prevState + 1);\n  };\n\n  const toggleModal = (modalImg, tags) => {\n    setModalShow(!modalShow);\n    setModalImg(modalImg);\n    setTags(tags);\n  };\n\n  return (\n      <>\n        <SearchBar onSubmit={handleSubmit} />\n        <Section>\n          {error && <h2>{error.message}</h2>}\n          {!!images.length && (\n            <ImageGallery images={images} onModalOpen={toggleModal} />\n          )}\n          {loading && <Loader />}\n          {images.length % 12 === 0 && !!images.length && (\n            <Button onLoadMore={handleNextPage} />\n          )}\n        </Section>\n        {modalShow && (\n          <Modal onClose={toggleModal} modalImg={modalImg} tags={tags} />\n        )}\n      </>\n    );\n}\n\nexport default App;","import axios from 'axios';\r\n\r\nconst API_KEY = '21924211-a56ef8093bc4c324081574229';\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\nconst PER_PAGE = 12;\r\n\r\nexport const fetchImg = (searchName, page) =>\r\n  axios.get(\r\n    `${BASE_URL}?image_type=photo&orientation=horizontal&q=${searchName}&page=${page}&per_page=${PER_PAGE}&key=${API_KEY}`,\r\n  );\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__2IlUM\",\"item\":\"ImageGallery_item__3-XRl\",\"galleryImage\":\"ImageGallery_galleryImage__1MyT5\"};"],"sourceRoot":""}